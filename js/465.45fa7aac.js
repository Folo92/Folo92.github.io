"use strict";(self["webpackChunkyun_admin"]=self["webpackChunkyun_admin"]||[]).push([[465],{650:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var l=a(3396);const i={class:"filter-container",style:{position:"absolute",top:"20px",left:"840px"}},s=(0,l.Uk)("分析文本"),d=(0,l._)("span",{style:{"vertical-align":"25%",color:"gray"}},"（录入数据）",-1);function r(e,t,a,r,o,n){const p=(0,l.up)("CommonDataTable"),u=(0,l.up)("el-input"),h=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(p,{ref:"child",tableColumns:o.tableColumns,getListData:n.getListData,createRow:n.createRow,updateRow:n.updateRow,deleteRow:n.deleteRow},null,8,["tableColumns","getListData","createRow","updateRow","deleteRow"]),(0,l._)("div",i,[(0,l.Wm)(u,{modelValue:o.path,"onUpdate:modelValue":t[0]||(t[0]=e=>o.path=e),placeholder:"文件路径",class:"filter-item",style:{width:"500px"}},null,8,["modelValue"]),(0,l._)("div",null,[(0,l.Wm)(h,{type:"warning",icon:"DataAnalysis",loading:o.isBusy,disabled:o.isBusy,class:"filter-item",onClick:n.analysisText},{default:(0,l.w5)((()=>[s])),_:1},8,["loading","disabled","onClick"]),d])])])}a(1703);var o=a(4101),n=a(2784);function p(e){return(0,n.Z)({url:"/api/article/getKeywords",method:"post",data:e,headers:{"Content-Type":"application/json"}})}function u(e){return(0,n.Z)({url:"/api/article/analysisText",method:"post",data:e,headers:{"Content-Type":"application/json"},timeout:12e4})}var h=a(1570),c={name:"ArticleExcerptTable",components:{CommonDataTable:h.Z},data(){return{tableColumns:[{field:"id",label:"ID",width:"100px"},{field:"userId",label:"用户ID",width:"120px",expand:!0},{field:"themes",label:"主题",width:"120px",queryable:!0,queryBoxWidth:"120px",queryBoxType:"input",editable:!0},{field:"tags",label:"标签",width:"120px",queryable:!0,queryBoxWidth:"120px",queryBoxType:"input",editable:!0,validator:this.tagsValidator},{field:"text",label:"内容",minWidth:"300px",queryable:!0,queryBoxWidth:"140px",queryBoxType:"input",required:!0,editable:!0,editType:"textarea",formTextareaSize:{minRows:4,maxRows:8},cellType:"textarea",cellTextareaSize:{minRows:2,maxRows:6},additionalFormItem:{type:"button",label:"生成主题和标签",style:"margin-top: 12px; text-align: right;",callback:this.getKeywords}},{field:"remark",label:"评述",width:"140px",expand:!0,editable:!0,editType:"textarea"},{field:"reference",label:"出处",width:"100px",expand:!0,editable:!0},{field:"Location",label:"位置",width:"100px",expand:!0,editable:!0},{field:"author",label:"作者",width:"100px",expand:!0,editable:!0},{field:"link",label:"链接",width:"100px",expand:!0,editable:!0},{field:"grade",label:"评分",width:"145px",editable:!0,editType:"rate",maxRate:5,cellType:"rate"},{field:"copyright",label:"版权",width:"80px",editable:!0,editType:"select",selectOptions:[{value:2,label:"改编"},{value:1,label:"原创"},{value:0,label:"摘抄"}],formatter:this.copyrightFormatter,cellType:"tag",tagOptions:{2:"",1:"success",0:"info"}},{field:"shareWith",label:"共享给",width:"84px",editable:!0,editType:"select",selectOptions:[{value:2,label:"所有人"},{value:1,label:"仅好友"},{value:0,label:"不共享"}],formatter:this.shareWithFormatter,cellType:"tag",tagOptions:{2:"success",1:"",0:"info"}},{field:"baseCreateTime",label:"创建时间",width:"100px"},{field:"BaseModifyTime",label:"修改时间",width:"100px",expand:!0}],path:"C:\\Users\\20200606\\Documents\\我的文档\\小说\\手机\\转UTF-8\\Test.txt",isBusy:!1}},methods:{getListData:o._z,createRow:o.Et,updateRow:o._E,deleteRow:o.mg,shareWithFormatter(e){return 0==e.shareWith?"不共享":1==e.shareWith?"仅好友":"所有人"},copyrightFormatter(e){return 0==e.copyright?"摘抄":1==e.copyright?"原创":"改编"},tagsValidator(e,t,a){const l=/^[\u4e00-\u9fa5_a-zA-Z0-9,，]{0,100}$/;setTimeout((()=>{!t||l.test(t)?a():a(new Error("格式不正确！请输入汉字、英文字母、数字，可用逗号分隔"))}),100)},getKeywords(e){e&&e.length>8?p(e).then((e=>{this.$refs.child.temp.themes=e.data[0],this.$refs.child.temp.tags=e.data[1]})):this.$message({message:"内容太少！",type:"warning"})},analysisText(){this.isBusy=!0,u(this.path).then((e=>{this.isBusy=!1,this.$notify({title:"Success",message:e.data,type:"success",duration:2e3}),this.$refs.child.handleFilter()})).catch((e=>{this.isBusy=!1,console.log(e)}))}}},y=a(89);const m=(0,y.Z)(c,[["render",r]]);var b=m}}]);
//# sourceMappingURL=465.45fa7aac.js.map