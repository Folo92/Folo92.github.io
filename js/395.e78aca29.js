"use strict";(self["webpackChunkyun_admin"]=self["webpackChunkyun_admin"]||[]).push([[395],{4101:function(e,t,a){a.d(t,{Cl:function(){return d},Et:function(){return y},JV:function(){return c},Nq:function(){return r},O4:function(){return u},Rd:function(){return h},XH:function(){return s},_E:function(){return w},_z:function(){return f},bv:function(){return p},fA:function(){return m},h8:function(){return o},lE:function(){return n},mg:function(){return x},r4:function(){return i},ul:function(){return g}});var l=a(2784);function n(e,t){return(0,l.Z)({url:"/api/manage/usermanage/getPageList",method:"get",params:{...e,...t}})}function i(e){return(0,l.Z)({url:"/api/manage/usermanage/createUser",method:"post",data:e})}function r(e){return(0,l.Z)({url:"/api/manage/usermanage/updateUser",method:"post",data:e})}function o(e){return(0,l.Z)({url:"/api/manage/usermanage/deleteUser",method:"post",data:e,headers:{"Content-Type":"application/json"}})}function d(e,t){return(0,l.Z)({url:"/api/manage/logapimanage/getPageList",method:"get",params:{...e,...t}})}function u(e){return(0,l.Z)({url:"/api/manage/logapimanage/createLogApi",method:"post",data:e})}function p(e){return(0,l.Z)({url:"/api/manage/logapimanage/updateLogApi",method:"post",data:e})}function s(e){return(0,l.Z)({url:"/api/manage/logapimanage/deleteLogApi",method:"post",data:e,headers:{"Content-Type":"application/json"}})}function c(e,t){return(0,l.Z)({url:"/api/manage/rolemanage/getPageList",method:"get",params:{...e,...t}})}function m(e){return(0,l.Z)({url:"/api/manage/rolemanage/createRole",method:"post",data:e})}function g(e){return(0,l.Z)({url:"/api/manage/rolemanage/updateRole",method:"post",data:e})}function h(e){return(0,l.Z)({url:"/api/manage/rolemanage/deleteRole",method:"post",data:e,headers:{"Content-Type":"application/json"}})}function f(e,t){return(0,l.Z)({url:"/api/manage/articleexcerptmanage/getPageList",method:"get",params:{...e,...t}})}function y(e){return(0,l.Z)({url:"/api/manage/articleexcerptmanage/createArticleExcerpt",method:"post",data:e})}function w(e){return(0,l.Z)({url:"/api/manage/articleexcerptmanage/updateArticleExcerpt",method:"post",data:e})}function x(e){return(0,l.Z)({url:"/api/manage/articleexcerptmanage/deleteArticleExcerpt",method:"post",data:e,headers:{"Content-Type":"application/json"}})}},5071:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var l=a(3396),n=a(7139),i=a(9242);const r={class:"app-container"},o={class:"excerpt-list"},d={class:"excerpt-list-container"},u={class:"filter-container"},p=(0,l._)("span",{style:{"font-size":"14px","font-weight":"bold","vertical-align":"25%",color:"gray"}},"关键字：",-1),s=(0,l._)("span",{style:{"font-size":"14px","font-weight":"bold","vertical-align":"25%",color:"gray"}},"排序：",-1),c=(0,l.Uk)(" 查询 "),m=(0,l.Uk)(" 展开所有行 "),g={style:{"margin-left":"86px","margin-bottom":"10px"}},h=["onClick"],f=(0,l.Uk)(" 阅读 ");function y(e,t,a,y,w,x){const b=(0,l.up)("el-input"),k=(0,l.up)("el-option"),C=(0,l.up)("el-select"),P=(0,l.up)("el-button"),V=(0,l.up)("el-checkbox"),_=(0,l.up)("el-rate"),A=(0,l.up)("el-table-column"),L=(0,l.up)("el-table"),R=(0,l.up)("pagination"),v=(0,l.up)("YunReader"),F=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l.wy)((0,l._)("div",o,[(0,l._)("div",d,[(0,l._)("div",u,[p,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(w.listQueryOptions,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[e.type&&"input"!=e.type?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(b,{key:0,modelValue:w.listQueryParam[e.field],"onUpdate:modelValue":t=>w.listQueryParam[e.field]=t,placeholder:e.label,clearable:"",style:(0,n.j5)("width: "+e.width+"; margin-right: 10px"),class:"filter-item",onKeyup:(0,i.D2)(x.handleFilter,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder","style","onKeyup"])),"select"==e.type?((0,l.wg)(),(0,l.j4)(C,{key:1,modelValue:w.listQueryParam[e.field],"onUpdate:modelValue":t=>w.listQueryParam[e.field]=t,placeholder:e.label,clearable:"",style:(0,n.j5)("width: "+e.width+"; margin-right: 10px"),class:"filter-item",onChange:x.handleFilter},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.selectOptions,(e=>((0,l.wg)(),(0,l.j4)(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","style","onChange"])):(0,l.kq)("",!0)],64)))),128)),s,(0,l.Wm)(C,{modelValue:w.listPagination.sortType,"onUpdate:modelValue":t[0]||(t[0]=e=>w.listPagination.sortType=e),placeholder:"SortType",style:{width:"100px","margin-right":"10px"},class:"filter-item",onChange:x.handleFilter},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(w.sortTypeOptions,(e=>((0,l.wg)(),(0,l.j4)(k,{key:e,label:"asc"==e?"顺序":"逆序",value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,l.Wm)(P,{class:"filter-item",style:{"margin-right":"20px"},type:"primary",icon:"Search",onClick:x.handleFilter},{default:(0,l.w5)((()=>[c])),_:1},8,["onClick"]),x.expandColumns.length?((0,l.wg)(),(0,l.j4)(V,{key:0,modelValue:w.expandAll,"onUpdate:modelValue":t[1]||(t[1]=e=>w.expandAll=e),class:"filter-item",onChange:t[2]||(t[2]=e=>w.tableKey=w.tableKey+1)},{default:(0,l.w5)((()=>[m])),_:1},8,["modelValue"])):(0,l.kq)("",!0)]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(L,{key:w.tableKey,data:w.list,border:"","default-expand-all":w.expandAll,"table-layout":"fixed","max-height":1e3,style:{width:"800px"},onSortChange:x.sortChange},{default:(0,l.w5)((()=>[x.expandColumns.length?((0,l.wg)(),(0,l.j4)(A,{key:0,width:"36px",type:"expand",fixed:"left"},{default:(0,l.w5)((e=>[(0,l._)("div",g,[(0,l.Wm)(L,{data:[e.row],border:!1},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(x.expandColumns,((e,t)=>((0,l.wg)(),(0,l.j4)(A,{key:t,prop:e.field,label:e.label,width:e.width,formatter:e.formatter,align:"left"},{default:(0,l.w5)((({row:t})=>["rate"==e.cellType?((0,l.wg)(),(0,l.j4)(_,{key:0,modelValue:t[e.field],"onUpdate:modelValue":a=>t[e.field]=a,colors:["#99A9BF","#F7BA2A","#FF9900"],max:5,style:{"margin-top":"8px"},disabled:!0},null,8,["modelValue","onUpdate:modelValue"])):(0,l.kq)("",!0)])),_:2},1032,["prop","label","width","formatter"])))),128))])),_:2},1032,["data"])])])),_:1})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(x.initialColumns,((e,t)=>((0,l.wg)(),(0,l.j4)(A,{key:t,prop:e.field,label:e.label,width:e.width,"min-width":e.minWidth,formatter:e.formatter,align:"left"},{default:(0,l.w5)((({row:t})=>["link"==e.cellType?((0,l.wg)(),(0,l.iD)("span",{key:0,class:(0,n.C_)(e.class),onClick:e=>x.ReadArticle(t)},(0,n.zw)(t[e.field]),11,h)):(0,l.kq)("",!0),"rate"==e.cellType?((0,l.wg)(),(0,l.j4)(_,{key:1,modelValue:t[e.field],"onUpdate:modelValue":a=>t[e.field]=a,colors:["#99A9BF","#F7BA2A","#FF9900"],max:5,style:{"margin-top":"8px"},disabled:!0},null,8,["modelValue","onUpdate:modelValue"])):(0,l.kq)("",!0)])),_:2},1032,["prop","label","width","min-width","formatter"])))),128)),(0,l.Wm)(A,{label:"操作",align:"center",width:"120","class-name":"small-padding fixed-width"},{default:(0,l.w5)((({row:e})=>[(0,l.Wm)(P,{type:"primary",size:"small",onClick:t=>x.ReadArticle(e)},{default:(0,l.w5)((()=>[f])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","default-expand-all","onSortChange"])),[[F,w.listLoading]]),(0,l.wy)((0,l.Wm)(R,{total:w.total,page:w.listPagination.pageIndex,"onUpdate:page":t[3]||(t[3]=e=>w.listPagination.pageIndex=e),limit:w.listPagination.pageSize,"onUpdate:limit":t[4]||(t[4]=e=>w.listPagination.pageSize=e),onPagination:x.getList},null,8,["total","page","limit","onPagination"]),[[i.F8,w.total>0]])])],512),[[i.F8,!w.inReader]]),(0,l.wy)((0,l.Wm)(v,{changeMode:x.changeMode,inReader:w.inReader,bookId:x.encode(w.bookName),bookName:w.bookName,articleData:w.articleData,chapterList:w.chapterList},null,8,["changeMode","inReader","bookId","bookName","articleData","chapterList"]),[[i.F8,w.inReader]])])}a(2801);var w=a(4101),x=a(5691),b=a(1924),k={name:"ExcerptList",components:{Pagination:x.Z,YunReader:b.Z},data(){return{listQueryOptions:{},listQueryParam:{},listPagination:{sort:"id",sortType:"desc",pageIndex:1,pageSize:20},tableKey:0,list:null,total:0,listLoading:!1,articleData:"",bookName:"",chapterList:[],inReader:!1,expandAll:!1,sortTypeOptions:["asc","desc"],tableColumns:[{field:"reference",label:"作品名",minWidth:"120px",queryable:!0,queryBoxWidth:"160px",queryBoxType:"input"},{field:"themes",label:"主题",minWidth:"140px",cellType:"link",class:"link-type"},{field:"tags",label:"标签",minWidth:"150px"},{field:"author",label:"作者",width:"120px",expand:"true"},{field:"grade",label:"评分",width:"150px",cellType:"rate",expand:"true"},{field:"copyright",label:"版权",width:"100px",expand:"true",formatter:this.copyrightFormatter}]}},created(){this.listQueryOptions=this.tableColumns.filter((e=>e.queryable)).map((e=>(this.listQueryParam[e.field]=void 0,{field:e.field,label:e.label,width:e.queryBoxWidth.length>0?e.queryBoxWidth:e.width.length>0?e.width:e.minWidth,type:e.queryBoxType,selectOptions:e.selectOptions}))),this.getList()},methods:{encode(e){let t=encodeURI(e),a=btoa(t);return a},getList(){this.listLoading=!0,(0,w._z)(this.listQueryParam,this.listPagination).then((e=>{this.list=e.data.data,this.total=e.data.total,this.listLoading=!1}))},handleFilter(){this.listPagination.pageIndex=1,this.getList()},ReadArticle(e){this.bookName=e.reference;const t=e.text.replaceAll("\r\n","\n").replaceAll("\r","\n").split("\n");this.articleData={title:e.themes,content:t},this.chapterList=[this.articleData],this.inReader=!this.inReader},changeMode(){this.inReader=!this.inReader},sortChange(e){const{prop:t,order:a}=e;this.listPagination.sort=t,this.listPagination.sortType="ascending"===a?" asc ":" desc ",this.handleFilter()},copyrightFormatter(e){return 0==e.copyright?"摘抄":1==e.copyright?"原创":"改编"}},computed:{initialColumns:function(){return this.tableColumns.filter((e=>!e.expand))},expandColumns:function(){return this.tableColumns.filter((e=>e.expand))}}},C=a(89);const P=(0,C.Z)(k,[["render",y]]);var V=P}}]);
//# sourceMappingURL=395.e78aca29.js.map