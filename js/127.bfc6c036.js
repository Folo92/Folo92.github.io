"use strict";(self["webpackChunkyun_admin"]=self["webpackChunkyun_admin"]||[]).push([[127],{6127:function(e,s,t){t.r(s),t.d(s,{default:function(){return T}});var a=t(3396),o=t(9242);const n=e=>((0,a.dD)("data-v-0b234b62"),e=e(),(0,a.Cn)(),e),i={class:"login-container"},r=n((()=>(0,a._)("div",{class:"title-container"},[(0,a._)("h3",{class:"title"},"账户登录")],-1))),l={class:"svg-container"},c={class:"svg-container"},p={class:"svg-container"},d=["src"],h=(0,a.Uk)(" 登 录 "),u=(0,a.Uk)("记住我"),g={style:{position:"relative"}},m=n((()=>(0,a._)("div",{class:"tips"},[(0,a._)("span",null,"其他登录方式：")],-1)));function f(e,s,t,n,f,w){const y=(0,a.up)("svg-icon"),b=(0,a.up)("el-input"),_=(0,a.up)("el-form-item"),k=(0,a.up)("el-tooltip"),v=(0,a.up)("el-button"),C=(0,a.up)("el-checkbox"),I=(0,a.up)("social-sign"),E=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(E,{ref:"loginForm",model:f.loginInfo,rules:f.loginRules,class:"login-form",autocomplete:"on","label-position":"left"},{default:(0,a.w5)((()=>[r,(0,a.Wm)(_,{prop:"username"},{default:(0,a.w5)((()=>[(0,a._)("span",l,[(0,a.Wm)(y,{"icon-class":"user"})]),(0,a.Wm)(b,{ref:"username",modelValue:f.loginInfo.username,"onUpdate:modelValue":s[0]||(s[0]=e=>f.loginInfo.username=e),placeholder:"输入用户名",name:"username",type:"text",tabindex:"1",autocomplete:"on"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(k,{visible:f.capsTooltip,"onUpdate:visible":s[4]||(s[4]=e=>f.capsTooltip=e),content:"Caps lock is On",placement:"right",manual:""},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{prop:"password"},{default:(0,a.w5)((()=>[(0,a._)("span",c,[(0,a.Wm)(y,{"icon-class":"password"})]),((0,a.wg)(),(0,a.j4)(b,{key:f.passwordType,ref:"password",modelValue:f.loginInfo.password,"onUpdate:modelValue":s[1]||(s[1]=e=>f.loginInfo.password=e),type:f.passwordType,placeholder:"输入密码",name:"password",tabindex:"2",autocomplete:"on",onKeyup:[w.checkCapslock,(0,o.D2)(w.handleLogin,["enter"])],onBlur:s[2]||(s[2]=e=>f.capsTooltip=!1)},null,8,["modelValue","type","onKeyup"])),(0,a._)("span",{class:"show-pwd",onClick:s[3]||(s[3]=(...e)=>w.showPwd&&w.showPwd(...e))},[(0,a.Wm)(y,{"icon-class":"password"===f.passwordType?"eye":"eye-open"},null,8,["icon-class"])])])),_:1})])),_:1},8,["visible"]),(0,a.Wm)(_,{prop:"captcha",class:"captcha-input"},{default:(0,a.w5)((()=>[(0,a._)("span",p,[(0,a.Wm)(y,{"icon-class":"message"})]),(0,a.Wm)(b,{ref:"captcha",modelValue:f.loginInfo.captcha,"onUpdate:modelValue":s[5]||(s[5]=e=>f.loginInfo.captcha=e),placeholder:"输入验证码",name:"captcha",type:"text",tabindex:"3",onKeyup:(0,o.D2)(w.handleLogin,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,a._)("img",{class:"captcha-img",src:f.captchaUrl,onClick:s[6]||(s[6]=e=>w.getCaptchaImg()),alt:"图片加载失败",title:"验证码有效期1分钟"},null,8,d),(0,a.Wm)(v,{loading:f.loading,class:"login-button",type:"primary",onClick:(0,o.iM)(w.handleLogin,["prevent"])},{default:(0,a.w5)((()=>[h])),_:1},8,["loading","onClick"]),(0,a.Wm)(C,{modelValue:f.rememberMe,"onUpdate:modelValue":s[7]||(s[7]=e=>f.rememberMe=e),style:{"margin-bottom":"20px"},onChange:s[8]||(s[8]=e=>w.handleCookies())},{default:(0,a.w5)((()=>[u])),_:1},8,["modelValue"]),(0,a._)("div",g,[m,(0,a.Wm)(I,{style:{display:"inline"}}),(0,a._)("a",{onClick:s[9]||(s[9]=(...s)=>e.forgetPwd&&e.forgetPwd(...s)),class:"register-link",style:{right:"70px"}}," 忘记密码 "),(0,a._)("a",{onClick:s[10]||(s[10]=(...e)=>w.handleRegister&&w.handleRegister(...e)),class:"register-link",style:{right:"0"}}," 立即注册 ")])])),_:1},8,["model","rules"])])}t(1703),t(2801),t(8675),t(3462),t(7380),t(1118);var w=t(9176);const y={class:"social-signup-container"},b={class:"wx-svg-container"},_={class:"qq-svg-container"};function k(e,s,t,o,n,i){const r=(0,a.up)("svg-icon");return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",{class:"sign-btn",onClick:s[0]||(s[0]=e=>i.wechatHandleClick("wechat"))},[(0,a._)("span",b,[(0,a.Wm)(r,{"icon-class":"wechat",class:"icon"})])]),(0,a._)("div",{class:"sign-btn",onClick:s[1]||(s[1]=e=>i.tencentHandleClick("tencent"))},[(0,a._)("span",_,[(0,a.Wm)(r,{"icon-class":"qq",class:"icon"})])])])}var v={name:"SocialSignin",methods:{wechatHandleClick(e){alert("ok")},tencentHandleClick(e){alert("ok")}}},C=t(89);const I=(0,C.Z)(v,[["render",k],["__scopeId","data-v-94b316be"]]);var E=I,W=t(2900),M=t(680),U={name:"Login",components:{SocialSign:E},data(){const e=(e,s,t)=>{(0,w.CI)(s)?t():t(new Error("Please enter the correct user name"))},s=(e,s,t)=>{s.length<6?t(new Error("The password can not be less than 6 digits")):t()};return{loginInfo:{username:"admin",password:"111111",captcha:""},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:s}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},captchaUrl:"",rememberMe:!1}},watch:{$route:{handler:function(e){const s=e.query;s&&(this.redirect=s.redirect,this.otherQuery=this.getOtherQuery(s))},immediate:!0}},created(){},mounted(){if(this.rememberMe="true"==M.Z.get("REMEMBER_ME"),this.rememberMe){const e=M.Z.get("USER_NAME"),s=M.Z.get("USER_PWD");e&&(this.loginInfo.username=e),s&&(this.loginInfo.password=s)}""===this.loginInfo.username?this.$refs.username.focus():""===this.loginInfo.password?this.$refs.password.focus():""===this.loginInfo.captcha&&this.$refs.captcha.focus(),this.getCaptchaImg()},unmounted(){},methods:{checkCapslock(e){const{key:s}=e;this.capsTooltip=s&&1===s.length&&s>="A"&&s<="Z"},showPwd(){"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((()=>{this.$refs.password.focus()}))},handleCookies(){this.rememberMe?(M.Z.set("USER_NAME",this.loginInfo.username,{expires:30}),M.Z.set("USER_PWD",this.loginInfo.password,{expires:30})):(M.Z.remove("USER_NAME"),M.Z.remove("USER_PWD")),M.Z.set("REMEMBER_ME",this.rememberMe,{expires:30})},handleLogin(){this.$refs.loginForm.validate((e=>{if(!e)return console.log("error submit!!"),!1;this.loading=!0,this.$store.dispatch("user/login",this.loginInfo).then((()=>{this.$router.push({path:this.redirect||"/",query:this.otherQuery}),this.loading=!1})).catch((()=>{this.loading=!1,this.loginInfo.captcha="",this.getCaptchaImg()}))}))},handleRegister(){this.$refs.loginForm.validate((e=>{if(!e)return console.log("error submit!!"),!1;this.$store.dispatch("user/register",this.loginInfo).then((()=>{alert("注册成功！"),this.$router.push({path:this.redirect||"/",query:this.otherQuery})})).catch((()=>{this.loginInfo.captcha="",this.getCaptchaImg()}))}))},getCaptchaImg(){(0,W.Pb)().then((e=>"data:image/jpeg;base64,"+btoa(new Uint8Array(e.data).reduce(((e,s)=>e+String.fromCharCode(s)),"")))).then((e=>{this.captchaUrl=e}))},getOtherQuery(e){return Object.keys(e).reduce(((s,t)=>("redirect"!==t&&(s[t]=e[t]),s)),{})}}};const R=(0,C.Z)(U,[["render",f],["__scopeId","data-v-0b234b62"]]);var T=R}}]);
//# sourceMappingURL=127.bfc6c036.js.map